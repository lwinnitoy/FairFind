<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FairFind - Ethical & Affordable Products</title>
    <link rel="stylesheet" href="styles.css">
    
    <style>
        :root{
            --brand:#1f8f6b;
            --muted:#6b7280;
            --card-bg:#ffffff;
            --surface:#f7faf8;
            --shadow:0 6px 18px rgba(31,31,31,0.08);
            --radius:12px;
        }

        /* page baseline */
        html,body{height:100%}
        body {
            margin:0;
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(180deg,#f6faf8 0%, #ffffff 60%);
            color:#0f1720;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }

        /* consistent centered container used across pages */
        .container { max-width:1100px; margin:0 auto; padding:0 1rem; box-sizing:border-box; }

        /* Top bar (matches about page) */
        .header, .site-header {
            background: linear-gradient(90deg, rgba(31,143,107,0.14), rgba(31,143,107,0.08));
            padding:1rem 0;
            border-bottom:1px solid rgba(31,143,107,0.08);
        }
        .header .container, .site-header .container { display:flex; align-items:center; justify-content:space-between; gap:1rem; }
        .logo h1 { margin:0; font-size:1.15rem; color:#0f1720; }
        .nav ul { margin:0; padding:0; list-style:none; display:flex; gap:1rem; }
        .nav a { color:#0f1720; text-decoration:none; padding:.25rem .4rem; border-radius:6px; }
        .nav a[aria-current="page"] { background: rgba(31,143,107,0.08); color: var(--brand); font-weight:600; }
        .nav a:hover { background: rgba(31,143,107,0.06); color: var(--brand); }

        /* Hero */
        .hero {
            margin:1.25rem 0;
            padding:1.5rem;
            border-radius:var(--radius);
            background: linear-gradient(180deg, #ffffff, #f7fff7);
            box-shadow: var(--shadow);
        }
        .hero .container { display:flex; flex-direction:column; align-items:center; text-align:center; gap:.5rem; }
        .hero h2 { margin:0; font-size:1.6rem; }
        .hero p { margin:0; color:var(--muted); max-width:820px; }

        .search-box { display:flex; gap:.5rem; margin-top:.75rem; width:100%; justify-content:center; }
        .search-box .search-input { padding:.5rem .6rem; border-radius:8px; border:1px solid #e6f3ef; min-width:240px; box-sizing:border-box; }
        .search-box .search-button, .search-box .filter-button { padding:.5rem .75rem; border-radius:8px; border:0; background:var(--brand); color:#fff; cursor:pointer; }
        .search-box .filter-button { background:transparent; color:var(--brand); border:1px solid rgba(31,143,107,0.12); }

        /* Product grid */
        .product-listings .product-grid, .product-grid {
            display:grid;
            grid-template-columns: repeat(3, 1fr);
            gap:1rem;
            margin-top:1rem;
        }
        .product-card {
            background:var(--card-bg);
            padding:1rem;
            border-radius:10px;
            box-shadow: var(--shadow);
            display:flex;
            flex-direction:column;
            gap:.5rem;
        }
        .product-image-placeholder { background:#f3faf6; border-radius:8px; padding:1.5rem; display:grid; place-items:center; color:var(--muted); }

        .price { font-weight:600; color:#0f1720; }

        /* Footer */
        footer.site-footer { margin-top:2rem; padding:1.25rem 0; color:var(--muted); border-top:1px solid #eef3ef; }

        /* overlay & left-side filter panel (kept from products page) */
        .filter-overlay {
            position: fixed;
            inset: 0;
            background: transparent; /* no grey overlay */
            opacity: 0;
            visibility: hidden;
            transition: opacity .28s ease;
            z-index: 999;
            pointer-events: none; /* allow interacting with page under panel */
        }
        .filter-overlay.open {
            opacity: 1;
            visibility: visible;
            pointer-events: none;
        }

        /* Reduced width so panel doesn't overlap product cards */
        .filter-panel {
            position: fixed;
            top: 0;
            left: -260px;         /* match negative offset to width so it's hidden */
            width: 260px;         /* reduced from 320px */
            max-width: 100%;
            min-width: 220px;     /* keep a sensible minimum on narrow desktops */
            height: 100%;
            background: #fff;
            box-shadow: 1px 0 10px rgba(0,0,0,0.12); /* slightly lighter shadow */
            transition: left .28s ease;
            z-index: 1000;
            padding: 1rem;
            overflow-y: auto;
        }
        .filter-panel.open { left: 0; }
        .filter-panel .close-btn { background:none; border:0; font-size:1.6rem; line-height:1; cursor:pointer; }
        .filter-section { margin: 0.75rem 0; }
        .filter-section label { display:block; font-weight:600; margin-bottom:0.35rem; }
        .filter-actions { display:flex; gap:.5rem; margin-top:1rem; }
        .filter-actions button { flex:1; padding:.5rem; }

        /* responsive */
        @media (max-width: 900px) {
            .product-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 640px) {
            .product-grid { grid-template-columns: 1fr; }
            .hero .container { align-items:flex-start; text-align:left; }
            .search-box { justify-content:flex-start; }
            .filter-panel { width:100%; left:-100%; min-width: auto; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>FairFind</h1>
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html" aria-current="page">Products</a></li>
                    <li><a href="companies.html">Companies</a></li>
                    <li><a href="about.html">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Left-side filter panel + overlay (added) -->
    <div id="filterOverlay" class="filter-overlay" tabindex="-1" aria-hidden="true"></div>

    <aside id="filterPanel" class="filter-panel" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="filterHeading">
        <div style="display:flex; align-items:center; justify-content:space-between;">
            <h2 id="filterHeading" style="margin:0; font-size:1.25rem;">Filters</h2>
            <button id="filterClose" class="close-btn" aria-label="Close filters">&times;</button>
        </div>

        <form id="filterForm" aria-describedby="filterHeading">
            <div class="filter-section">
                <label for="priceRange">Max price</label>
                <input id="priceRange" name="maxPrice" type="number" min="0" placeholder="e.g. 50" style="width:100%; padding:.4rem;">
            </div>

            <div class="filter-section">
                <label>Tags</label>
                <label><input type="checkbox" name="tag" value="ethical"> Ethical</label>
                <label><input type="checkbox" name="tag" value="affordable"> Affordable</label>
                <label><input type="checkbox" name="tag" value="eco"> Eco-friendly</label>
            </div>

            <div class="filter-actions">
                <button type="button" id="applyFilters" class="btn">Apply</button>
                <button type="button" id="clearFilters" class="btn">Clear</button>
            </div>
        </form>
    </aside>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>Discover Ethical and Affordable Products</h2>
            <p>Browse our curated list of products that align with your values and budget</p>
            <div class="search-box">
                <!-- added id to toggle -->
                <button id="filterButton" class="filter-button" aria-label="Open filters">Filter</button>
                <input type="text" placeholder="Search for a product" class="search-input">
                <button class="search-button">Search</button>
                
            </div>
        </div>
    </section>

    <!-- Product Listings Section -->
    <section id="product-listings" class="product-listings">
        <div class="container">
            <h2>Featured Products</h2>
            <div class="product-grid">
                <!-- Product 1 -->
                <div class="product-card">
                    <div class="product-image-placeholder">
                        <span>Product Image</span>
                    </div>
                    <h3>Ethical Product A</h3>
                    <p class="price">$45.00</p>
                    <ul class="product-features">
                        <li>High quality</li>
                        <li>Fair trade certified</li>
                        <li>Eco-friendly packaging</li>
                    </ul>
                    <div class="badges">
                        <span class="badge ethical">Ethical</span>
                        <span class="badge affordable">Affordable</span>
                    </div>
                </div>

                <!-- Product 2 -->
                <div class="product-card">
                    <div class="product-image-placeholder">
                        <span>Product Image</span>
                    </div>
                    <h3>Ethical Product B</h3>
                    <p class="price">$30.00</p>
                    <ul class="product-features">
                        <li>Good quality</li>
                        <li>Locally sourced materials</li>
                        <li>Supports community artisans</li>
                    </ul>
                    <div class="badges">
                        <span class="badge ethical">Ethical</span>
                        <span class="badge affordable">Affordable</span>
                    </div>
                </div>

                <!-- Product 3 -->
                <div class="product-card">
                    <div class="product-image-placeholder">
                        <span>Product Image</span>
                    </div>
                    <h3>Ethical Product C</h3>
                    <p class="price">$60.00</p>
                    <ul class="product-features">
                        <li>Premium quality</li>
                        <li>Recycled materials</li>
                        <li>Supports environmental initiatives</li>
                    </ul>
                    <div class="badges">
                        <span class="badge ethical">Ethical</span>
                        <span class="badge affordable">Affordable</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Script to toggle the filter panel -->
    <script>
        (function () {
            const openBtn = document.getElementById('filterButton');
            const closeBtn = document.getElementById('filterClose');
            const panel = document.getElementById('filterPanel');
            const overlay = document.getElementById('filterOverlay');
            const applyBtn = document.getElementById('applyFilters');
            const clearBtn = document.getElementById('clearFilters');
            const firstFocusable = document.getElementById('priceRange');

            function openPanel() {
                panel.classList.add('open');
                overlay.classList.add('open');
                panel.setAttribute('aria-hidden', 'false');
                overlay.setAttribute('aria-hidden', 'false');
                if (firstFocusable) firstFocusable.focus();
            }

            function closePanel() {
                panel.classList.remove('open');
                overlay.classList.remove('open');
                panel.setAttribute('aria-hidden', 'true');
                overlay.setAttribute('aria-hidden', 'true');
                openBtn.focus();
            }

            function togglePanel() {
                if (panel.classList.contains('open')) {
                    closePanel();
                } else {
                    openPanel();
                }
            }

            // toggle when clicking the filter button
            openBtn.addEventListener('click', function (e) {
                e.preventDefault();
                togglePanel();
            });

            closeBtn.addEventListener('click', closePanel);

            // keep overlay non-blocking; optional: allow overlay click to close
            overlay.addEventListener('click', function () {
                // close only if the overlay is visible and pointer-events are enabled
                if (panel.classList.contains('open')) closePanel();
            });

            // close with Esc
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && panel.classList.contains('open')) {
                    closePanel();
                }
            });

            // simple apply/clear handlers (no backend logic here)
            applyBtn.addEventListener('click', function () {
                const form = document.getElementById('filterForm');
                const data = new FormData(form);
                closePanel();
            });

            clearBtn.addEventListener('click', function () {
                document.getElementById('filterForm').reset();
            });

            // --- Search functionality: run on Enter or Search button click ---
            const searchInput = document.querySelector('.search-input');
            const searchBtn = document.querySelector('.search-button');
            const productGrid = document.querySelector('.product-grid');

            function normalize(str) {
                return (str || '').toString().trim().toLowerCase();
            }

            function performSearch() {
                const query = normalize(searchInput && searchInput.value);
                const cards = productGrid ? productGrid.querySelectorAll('.product-card') : [];
                let visibleCount = 0;

                cards.forEach(card => {
                    const title = normalize(card.querySelector('h3')?.textContent);
                    const price = normalize(card.querySelector('.price')?.textContent);
                    const features = normalize(Array.from(card.querySelectorAll('.product-features li')).map(li => li.textContent).join(' '));
                    const badges = normalize(Array.from(card.querySelectorAll('.badges .badge')).map(b => b.textContent).join(' '));
                    const hay = `${title} ${price} ${features} ${badges}`;

                    if (!query || hay.indexOf(query) !== -1) {
                        card.style.display = '';
                        visibleCount++;
                    } else {
                        card.style.display = 'none';
                    }
                });

                // show/no-results message
                let noEl = productGrid.querySelector('.no-results');
                if (visibleCount === 0) {
                    if (!noEl) {
                        noEl = document.createElement('div');
                        noEl.className = 'no-results';
                        noEl.textContent = 'No products found.';
                        noEl.style.padding = '1rem';
                        noEl.style.gridColumn = '1/-1';
                        noEl.style.textAlign = 'center';
                        productGrid.appendChild(noEl);
                    }
                } else {
                    if (noEl) noEl.remove();
                }
            }

            if (searchBtn) {
                searchBtn.addEventListener('click', function (e) {
                    e.preventDefault();
                    performSearch();
                });
            }

            if (searchInput) {
                searchInput.addEventListener('keydown', function (e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        performSearch();
                    }
                });
            }
        })();
    </script>
</body>
</html>